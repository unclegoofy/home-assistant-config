# ─────────────────────────────────────────────
# Script: sync_tv_leds
# Purpose: Sync LED state with TV power state
# Inputs:
#   tv_entity: media_player entity to monitor
#   led_entity: light or switch entity to control
#   brightness: optional brightness_pct (for lights)
# ─────────────────────────────────────────────

alias: sync_tv_leds
description: Sync LED state with TV power state
fields:
  tv_entity:
    description: TV media_player entity
    example: media_player.master_tv
  led_entity:
    description: LED light or switch entity
    example: light.master_tv_led
  brightness:
    description: Brightness percentage when turning on
    example: 95

variables:
  tv: !input tv_entity
  led: !input led_entity
  brightness_level: !input brightness

sequence:
  - choose:
      - conditions:
          - condition: state
            entity_id: "{{ tv }}"
            state: "on"
        sequence:
          - service: light.turn_on
            target:
              entity_id: "{{ led }}"
            data:
              brightness_pct: "{{ brightness_level | default(100) }}"
      - conditions:
          - condition: state
            entity_id: "{{ tv }}"
            state: "off"
        sequence:
          - service: light.turn_off
            target:
              entity_id: "{{ led }}"
mode: single