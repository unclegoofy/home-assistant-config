# ─────────────────────────────────────────────
# Script: sync_tv_leds
# Purpose: Sync LED state with TV power state
# Inputs:
#   tv_entity: media_player entity to monitor
#   led_entity: light or switch entity to control
#   brightness: optional brightness_pct (for lights)
# ─────────────────────────────────────────────

alias: Sync TV LEDs
description: Sync LED state with TV power state
mode: single
fields:
  tv_entity:
    name: TV Entity
    description: TV media_player entity
    example: media_player.master_tv
    selector:
      entity:
        domain: media_player
  led_entity:
    name: LED Entity
    description: LED light or switch entity
    example: light.master_tv_led
    selector:
      entity:
        domain: light
  brightness:
    name: Brightness
    description: Brightness percentage when turning on
    example: 95
    selector:
      number:
        min: 0
        max: 100
        unit_of_measurement: "%"
sequence:
  - choose:
      - conditions:
          - condition: state
            entity_id: "{{ tv_entity }}"
            state: "on"
        sequence:
          - service: light.turn_on
            target:
              entity_id: "{{ led_entity }}"
            data:
              brightness_pct: "{{ brightness | default(100) }}"
      - conditions:
          - condition: state
            entity_id: "{{ tv_entity }}"
            state: "off"
        sequence:
          - service: light.turn_off
            target:
              entity_id: "{{ led_entity }}"