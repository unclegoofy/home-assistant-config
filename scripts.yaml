restore_light_state:
  alias: Restore Light State
  description: Restore light brightness after delay
  mode: single
  fields:
    target_light:
      name: Target Light
      description: Light entity to restore
      example: light.front_door
      selector:
        entity:
          domain: light
    brightness:
      name: Brightness
      description: Brightness percentage to restore
      example: 25
      selector:
        number:
          min: 0
          max: 100
          unit_of_measurement: '%'
  sequence:
  - delay: 00:02:00
  - service: light.turn_on
    target:
      entity_id: '{{ target_light }}'
    data:
      brightness_pct: '{{ brightness }}'
lets_go_home_2:
  sequence:
  - action: scene.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: scene.time_to_go_home_scene
  alias: Lets go home
  description: ''
time_for_bed_script_3:
  alias: time for bed script
  description: Runs bedtime scene, starts nightlight flashing if garage door is open,
    then turns off kitchen accent light after 5 minutes
  icon: mdi:bed
  sequence:
  - action: scene.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: scene.time_for_bed_scene
  - action: scene.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: scene.time_to_go_home_scene
  - action: script.flash_hall_nightlight_until_garage_door_closes
    metadata: {}
    data: {}
  - delay:
      minutes: 5
  - action: switch.turn_off
    data: {}
    target:
      entity_id: switch.kitchen_accent_lights_power_switch
boost_light_temporarily:
  alias: Boost Light Temporarily Front Door
  description: ''
  sequence:
  - action: scene.create
    data:
      scene_id: restore_front_door
      snapshot_entities:
      - light.front_door_light
  - action: light.turn_on
    target:
      device_id: 12eb2902fec46e4063b6bca537501535
    data:
      brightness_pct: 100
      color_temp_kelvin: 6500
  - delay: 00:02:00
  - action: scene.turn_on
    target:
      entity_id: scene.restore_front_door
flash_hall_nightlight_until_garage_door_closes:
  alias: Flash Hall Nightlight Until Garage Door Closes
  description: Flashes red if garage door is open, then restores previous nightlight
    state -  called from time for bed scene
  sequence:
  - data:
      scene_id: restore_hall_nightlight
      snapshot_entities:
      - light.hall_nightlight_light
    action: scene.create
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.side_garage_door_opening
        state: 'on'
      sequence:
      - repeat:
          until:
          - condition: state
            entity_id: binary_sensor.side_garage_door_opening
            state: 'off'
          sequence:
          - target:
              entity_id: light.hall_nightlight_light
            data:
              rgb_color:
              - 255
              - 0
              - 0
              brightness: 200
            action: light.turn_on
          - delay:
              seconds: 1
          - target:
              entity_id: light.hall_nightlight_light
            action: light.turn_off
          - delay:
              seconds: 1
  - target:
      entity_id: scene.restore_hall_nightlight
    action: scene.turn_on
flash_kitchen_nightlight_when_dishes_are_clean:
  alias: Flash Kitchen Nightlight When Dishes Are Clean
  description: Flashes kitchen nightlight blue for up to 5 minutes, then restores
    previous state
  sequence:
  - variables:
      stop_time: '{{ now() + timedelta(minutes=5) }}'
  - data:
      scene_id: restore_kitchen_nightlight
      snapshot_entities:
      - light.kitchen_nightlight_light
    action: scene.create
  - repeat:
      count: 6
      sequence:
      - target:
          entity_id: light.kitchen_nightlight_light
        data:
          brightness: 255
          rgb_color:
          - 0
          - 0
          - 255
        action: light.turn_on
      - delay:
          seconds: 1
      - target:
          entity_id: light.kitchen_nightlight_light
        action: light.turn_off
      - delay:
          seconds: 1
  - target:
      entity_id: scene.restore_kitchen_nightlight
    action: scene.turn_on
boost_light_temporarily_driveway_lights:
  sequence:
  - action: scene.create
    data:
      scene_id: restore_driveway_lights
      snapshot_entities:
      - light.driveway_lights
  - action: light.turn_on
    data:
      brightness_pct: 100
      color_temp_kelvin: 6500
    target:
      entity_id: light.driveway_lights
  - delay: 00:02:00
  - action: scene.turn_on
    data: {}
    target:
      entity_id: scene.restore_driveway_lights
  alias: Boost Light Temporarily Driveway Lights
  description: ''
